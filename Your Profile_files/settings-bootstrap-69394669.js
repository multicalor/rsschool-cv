System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var e,t,n,s,o,r,i,c,a,l,u,d,m,p,f,h,g,j,b,y,k,v,L,T,w,E,S,M;return{setters:[function(h){e=h.a,t=h.c,n=h.b,s=h.g,o=h.q,r=h.o,i=h.r,c=h.d,a=h.f,l=h.D,u=h.n,d=h._,m=h.z,p=h.B,f=h.w},function(e){h=e.l,g=e.n,j=e.k,b=e.u,y=e.M,k=e.d,v=e.r,L=e.b,T=e.g,w=e.w,E=e.aa,S=e.ao,M=e.a3}],execute:function(){function H(e,t){const n=new URLSearchParams(window.location.search);n.set(e,t);const s=new URL(window.location.href,window.location.origin);s.search=n.toString(),h(g(),"",s.toString())}function x(e,t,n){const s=e.split(t);return s[s.length-1]=n,s.join(t)}function A(){return n(document,"input.js-edit-integration-setup-url",HTMLInputElement)}function I(){return n(document,".js-help-text-for-redirect-on-update")}function q(e){e&&((function(){const e=t(A(),".form-group");return n(e,".js-setup-url-hint")}()).textContent=e)}function C(){const e=document.getElementById("js-update-integration-permissions");e&&e.removeAttribute("disabled")}function _(){return function(){const e=o(document,'[id^=integration_permission_]:checked:not([data-permission="none"])',HTMLInputElement);return Array.from(e,e=>e.getAttribute("data-resource"))}().flatMap(e=>function(e){return e?o(document,`.js-integration-hook-event[data-resource~="${e}"]:checked`,HTMLInputElement):[]}(e))}function D(e=!1){const s=n(document,".js-integration-permissions-selector [id=integration_permission_metadata_read]",HTMLInputElement),r=t(s,".js-list-group-item");e&&b(s,!0),n(r,".js-mandatory-label").hidden=!e;for(const t of o(r,"input",HTMLInputElement))t!==s&&(t.disabled=e)}function F(){const e=n(document,".js-content-references input",HTMLInputElement),s=n(document,".js-content-references template",HTMLTemplateElement),o=n(document,".js-content-references-domain-list"),r=e.value;if(!r)return;const i=s.content.cloneNode(!0);i instanceof DocumentFragment&&(n(i,"input",HTMLInputElement).value=r,n(i,".js-content-references-domain-url").textContent=r,e.value="",o.appendChild(i),t(o,".Box").hidden=!1,C())}function P(e,t){for(const n of document.querySelectorAll(".js-setting-toggle .js-status-indicator"))n.classList.remove("status-indicator-success","status-indicator-loading","status-indicator-failed");e.classList.add(t)}async function B(e){if(!e)return;const t=e.getAttribute("data-url");if(!t)return;let n;try{n=await L(document,t),e.innerHTML="",e.append(n)}catch(s){window.location.reload()}}e("change",".js-policy-repos-container .js-repository-item-checkbox",(function(e){const n=e.target,s=t(n,".js-policy-repos-container").querySelector(".js-policy-repos-form"),o=function(e){const t=document.createElement("input");return t.type="hidden",t.name=e.checked?"enable[]":"disable[]",t.value=e.value,t}(n),r=s.querySelector(`[value='${o.value}']`);r?r.replaceWith(o):s.append(o)})),e("details-menu-selected",".js-actions-runner-platform-menu",(function(e){const r=e.detail.relatedTarget,i=t(r,".js-actions-runner-instructions"),c=n(i,".js-actions-runner-architecture-menu"),a=s(r,"data-download-os"),l=s(c,"data-default-architecture");for(const t of o(c,"[data-download-os]")){const e=s(t,"data-download-os");t.hidden=e!==a,e===a&&s(t,"data-download-architecture")===l&&t.click()}n(i,".js-actions-runner-windows-instructions").hidden="win"!==a,n(i,".js-actions-runner-unix-instructions").hidden="win"===a,H("os",a)}),{capture:!0}),e("details-menu-selected",".js-actions-runner-architecture-menu",(function(e){const n=e.detail.relatedTarget,r=t(n,".js-actions-runner-instructions"),i=s(n,"data-download-url"),c=s(n,"data-download-filename");for(const t of o(r,".js-action-runner-url"))t.textContent=i;for(const t of o(r,".js-action-runner-filename"))t.textContent=c;H("arch",s(n,"data-download-architecture"))}),{capture:!0}),r(".js-email-global-unsubscribe-form",(function(e){n(e,".js-email-global-unsubscribe-submit",HTMLInputElement).disabled=!0})),e("change",".js-email-global-unsubscribe-form",(function(e){const t=e.currentTarget,s=n(t,".js-email-global-unsubscribe-submit",HTMLInputElement),r=o(t,".js-email-global-unsubscribe",HTMLInputElement),i=Array.from(r).some(e=>e.checked!==e.defaultChecked);s.disabled=!i})),i(".js-email-unsubscribe-form",(async function(e,t){await t.text();for(const n of document.querySelectorAll(".js-email-unsubscribe-message"))n instanceof HTMLElement&&(n.hidden=!n.hidden)})),e("change","input.js-application-callback-url-field",(function({currentTarget:e}){let t=e.id;t=x(t,"_","_destroy");const n=document.getElementById(t);if(n instanceof HTMLInputElement){const t=e.value;n.value=""===t?"true":"false"}})),e("click",".js-add-application-callback-url",(function(e){e.preventDefault();const t=document.querySelector(".js-application-callback-urls");if(!t)return;const n=t.querySelectorAll(".js-application-callback-url"),o=n.length;if(0===o)return;const r=n[o-1],i=r.cloneNode(!0);if(!(i instanceof HTMLElement))return;let c=t.getAttribute("data-index");null===c&&(c="0");const a=(parseInt(c,10)+1).toString();t.setAttribute("data-index",a);const l=i.querySelector("label");if(!l)return;const u=s(l,"for");l.setAttribute("for",u.replace(/\d+/,c));const d=i.querySelector("input");d&&(d.id=d.id.replace(/\d+/,c),d.name=d.name.replace(/\d+/,c),d.value="",r.insertAdjacentElement("afterend",i))})),e("click",".js-delete-application-callback-url",(function(e){e.preventDefault();const t=e.currentTarget.closest(".js-application-callback-url");if(!t)return;const n=t.querySelector("input");if(!n)return;const s=document.querySelector(".js-application-callback-urls");if(!s)return;s.querySelectorAll(".js-application-callback-url").length>1?t.remove():n.value="";let o=n.id;o=x(o,"_","_destroy");const r=document.getElementById(o);r instanceof HTMLInputElement&&(r.value="true")})),e("change",".js-edit-integration-request-oauth-on-install",(function(e){const t=e.target,n=A();if(t.checked){n.disabled=!0,n.placeholder=n.getAttribute("data-hint-unavailable-when-install")||"",q(n.getAttribute("data-hint-same-as-callback-url")||"");const e=I();e.textContent=e.getAttribute("data-hint-redirect-on-update-callback-url")||""}else{n.disabled=!1,n.placeholder="",n.value=n.getAttribute("data-setup-url")||"",q(n.getAttribute("data-hint-setup-url")||"");const e=I();e.textContent=e.getAttribute("data-hint-redirect-on-update-setup-url")||""}})),e("change",".js-integration-permissions-selector [id^=integration_permission_]",(function({currentTarget:e}){const s=e.getAttribute("data-permission"),r=e.getAttribute("data-resource")||"",i=o(document,`.js-integration-hook-event[data-resource~="${r}"]`,HTMLInputElement),c=o(document,".js-integration-single-file-resource",HTMLInputElement),a=o(document,`.js-dropdown-container[data-resource~="${r}"]`);if(C(),"none"!==s){const n=o(document,`.js-integration-hook-event-permission-error[data-resource~='${r}']`);for(const e of n)e.classList.add("d-none");const s=o(document,".js-integration-single-file-permission-error");for(const e of s)e.classList.add("d-none");for(const e of i)e.readOnly=!1;for(const e of c)e.readOnly=!1;t(e,".js-list-group-item").classList.remove("disabled");for(const e of a)e.classList.remove("d-none")}else{for(const e of i)l=e,_().includes(l)||(e.readOnly=!0,e.checked=!1,t(e,".js-dropdown-container").classList.add("anim-fade-in","d-none"));if(t(e,".js-list-group-item").classList.add("disabled"),"single_file"===r)for(const e of c)e.readOnly=!0,e.value="";else"content_references"===r&&(n(document,`.js-dropdown-container[data-resource~='${r}']`).classList.add("anim-fade-in","d-none"),"none"===s&&(n(document,".js-content-references-domain-list").innerHTML=""))}var l})),e("change",".js-hook-active-checkbox",(function(e){const t=e.currentTarget;for(const n of document.querySelectorAll(".js-integration-hook-enabled"))n.hidden=!t.checked})),e("change",".js-integration-permissions-selector [id^=integration_permission_][data-resource-parent^=repository]",(function({currentTarget:e}){const t=e.getAttribute("data-permission");"metadata"!==(e.getAttribute("data-resource")||"")&&("none"!==t?D(!0):function(){let e=!0;const t=document.querySelectorAll(".js-integration-permissions-selector [id^=integration_permission_][data-resource-parent=repository]:checked");for(const n of t){const t=n.getAttribute("data-permission")||"none";if("metadata"!==(n.getAttribute("data-resource")||"")&&"none"!==t){e=!1;break}}return e}()&&D())})),e("change",".js-integration-permissions-selector [name^=integration]",C),e("click",".js-integration-permissions-selector .js-integration-hook-event",(function(e){const s=e.currentTarget;if(s.readOnly){const o=t(s,".js-send-events");n(o,".js-integration-hook-event-permission-error").classList.remove("d-none"),e.preventDefault()}})),e("click",".js-integration-permissions-selector .js-integration-single-file-resource",(function(e){const s=e.currentTarget;if(s.readOnly){const o=t(s,".js-single-file");n(o,".js-integration-single-file-permission-error").classList.remove("d-none"),e.preventDefault()}})),j("keydown",".js-content-references input",(function(e){"Enter"===e.key&&(e.preventDefault(),F())})),e("click",".js-content-references .js-domain-add",F),e("click",".js-content-references .js-close",(function(e){if(!(e.target instanceof Element))return;const n=t(e.target,"li"),s=n.parentElement;s&&(s.removeChild(n),0===o(s,"li").length&&(t(s,".Box").hidden=!0),C())})),y(".js-key-link-input",c((async function(e){const t=e.target.form,s=o(t,".js-key-link-input",HTMLInputElement),r=new FormData;for(const n of s)r.append(n.name,n.value);const i=n(t,".js-key-link-check",HTMLElement),c=function(e){const t=e.getAttribute("src");if(!t)return"";const n=document.createElement("a");return n.href=t,n.href}(i),a=n(i.parentElement,".js-key-link-check-csrf",HTMLInputElement);try{const e=await(await k(c,{method:"POST",mode:"same-origin",body:r,headers:{"Scoped-CSRF-Token":a.value}})).text();i.innerHTML=e,i.hidden=!1}catch(l){i.hidden=!0}}),300)),i(".js-setting-toggle",(async function(e,t){const s=n(e,".js-status-indicator");P(s,"status-indicator-loading");try{await t.text(),P(s,"status-indicator-success")}catch(o){P(s,"status-indicator-failed")}})),e("change",".js-toggle-email-settings input",(function(){const e=n(document,".js-notification-emails"),t=document.querySelector(".js-toggle-email-settings input:checked");e.classList.toggle("d-none",!t)})),e("change",".js-toggle-ci-failures-only-setting input",(function(){const e=!!document.querySelector(".js-toggle-ci-failures-only-setting input:checked"),t=n(document,".js-ci-failures-only-settings input",HTMLInputElement),s=t.closest("label");s&&s.classList.toggle("text-gray-light",!e),e||(t.checked=!1),t.disabled=!e})),i(".js-revoke-access-form",(async function(e,t){await t.html();const o=s(e,"data-id"),r=s(e,"data-type-name"),i=n(document,`.js-revoke-item[data-type='${r}'][data-id='${o}']`);i.remove(),i.classList.contains("new-token")&&n(document,".js-flash-new-token").remove()})),e("click",".js-delete-oauth-application-image",(function(){const e=n(document,".js-delete-oauth-application-image-form",HTMLFormElement);v(e)})),e("click",".js-new-callback",(function(e){e.preventDefault();const s=e.currentTarget,o=t(s,".js-callback-urls"),r=n(o,".js-callback-url").cloneNode(!0);r instanceof HTMLElement&&(r.classList.remove("is-default-callback"),n(r,"input",HTMLInputElement).value="",o.classList.add("has-many"),s.parentNode.insertBefore(r,s))})),e("click",".js-delete-callback",(function(e){e.preventDefault();const n=e.currentTarget;t(n,".js-callback-url").remove();const s=t(n,".js-callback-urls");o(s,".js-callback-url",HTMLElement).length<=1&&s.classList.remove("has-many")})),e("click",".js-oauth-application-whitelist .js-deny-this-request",(function(e){const n=e.currentTarget;n.nextElementSibling.value="denied",v(t(n,".js-org-application-access-form",HTMLFormElement))})),e("click",".js-generate-integration-key",(function(){const e=n(document,".js-integration-key-management-wrapper");e.classList.add("downloading"),e.classList.contains("js-integration-key-multi")&&(e.classList.add("has-keys"),setTimeout((function(){const e=n(document,".js-integration-keys-container",HTMLElement);e&&B(e)}),1e3))})),i(".js-remove-integration-key",(async function(e,o){try{await o.text()}catch(c){if(!c.response)throw c;t(e,"details").removeAttribute("open");const s=n(document,".js-integration-key-management-wrapper"),o=n(s,".js-error-container"),r=n(o,".js-error-message");switch(c.response.status){case 500:r.textContent="Oops, something went wrong.";break;case 404:r.textContent="Oops, that key could not be found.";break;default:r.textContent=c.response.json.message}return void s.classList.add("error")}const r=s(e,"data-key-id"),i=document.getElementById(r);if(i){const e=t(i,".js-integration-keys-container",HTMLElement);e&&B(e)}})),e("click",".js-error-dismiss",(function(){const e=n(document,".js-integration-keys-container",HTMLElement);e&&B(e)})),e("change",".js-checkbox-scope",(function(e){const n=e.currentTarget,s=t(n,".js-check-scope-container"),r=o(s,".js-checkbox-scope",HTMLInputElement);for(const t of r)t!==n&&(t.checked=n.checked,t.disabled=n.checked)})),e("change","[data-check-related-scopes]",(function(e){const t=e.currentTarget,n=s(t,"data-check-related-scopes").split(" ");for(const s of n){const e=o(document,`[data-scope-for="${s}"] .js-checkbox-scope`,HTMLInputElement);for(const n of e)n.checked=t.checked,n.value!==s&&(n.disabled=t.checked)}}));function $(){const e=n(document,".js-org-secrets-selection"),t=n(e,".js-secrets-visibility-menu input:checked"),r=s(t,"value"),i=n(e,".js-repository-items-dialog");i.hidden="VISIBILITY_SELECTED_REPOSITORIES"!==r;const c=n(e,".js-repository-selection-component"),a=o(c,".js-repository-item-checkbox",HTMLInputElement).filter(e=>e.checked).length,l=n(i,".js-selected-repos-label");l.hidden="VISIBILITY_SELECTED_REPOSITORIES"!==r,n(l,".js-selected-repositories-count").textContent=a.toString(),n(l,".js-multiple-repositories-text").hidden=1===a,n(l,".js-single-repository-text").hidden=1!==a}function O(e){const n=t(e.target,".js-encrypt-submit").querySelector(".js-btn-save-secret");n&&(n.disabled=!1,n.setAttribute("aria-disabled","false"))}function R(e,t){const s=n(t,".js-repo-access-error");s.textContent=e,s.classList.remove("d-none")}function z(){for(const e of document.querySelectorAll(".js-repo-access-error"))e.textContent="",e.classList.add("d-none")}function W(e){const t=e.querySelectorAll(".js-repo-access-entry").length;e.classList.toggle("is-empty",0===t);const s=e.querySelector(".js-collab-limit");if(s){const o=parseInt(s.getAttribute("data-collab-limit")||"",10),r=n(e,".js-over-limit",HTMLElement),i=n(e,".js-under-limit",HTMLElement);r.classList.toggle("d-none",t<o),i.classList.toggle("d-none",t>=o)}}function N(e){for(const t of e)t.hidden=!t.hidden}function U(e){for(const n of e){n.disabled=!1,t(n,".js-role-checkbox").classList.remove("text-gray-light")}}function J(e,t){e instanceof HTMLElement&&(e.hidden=t)}function V(e){const t=n(e,".js-authorized-pushers");if(!t.getAttribute("data-limit"))return;const s=parseInt(t.getAttribute("data-limit")||""),o=t.querySelectorAll(".js-authorized-user-or-team").length;t.classList.toggle("at-limit",o>=s)}e("click",".js-new-secret-value-button",(function(e){const s=e.currentTarget,o=t(s,".js-secret-value-form-group");n(o,".js-new-secret-value-input").hidden=!1,n(o,".js-new-secret-value-prompt").hidden=!0,O(e)})),e("reset",".js-org-secrets-selection .js-repository-selection-component",$),e("details-menu-selected",".js-secrets-visibility-menu",O,{capture:!0}),e("details-menu-selected",".js-secrets-visibility-menu",$,{capture:!0}),e("change",".js-repo-actions-settings input[type=radio]",(function({currentTarget:e}){const s=e.form;for(const t of s.querySelectorAll(".js-actions-status-indicator"))t.classList.remove("status-indicator-success","status-indicator-failed","status-indicator-loading");const o=t(e,".js-actions-option"),r=n(o,".js-actions-status-indicator");r.classList.remove("status-indicator-success","status-indicator-failed"),r.classList.add("status-indicator-loading")})),e("details-menu-selected",".js-repo-access-team-select-menu",(function(e){const s=e.detail.relatedTarget,o=s.getAttribute("data-team-id")||"",r=n(t(s,".js-repo-access-group"),".js-add-repo-access-field",HTMLInputElement);r.value=o,v(r.form)}),{capture:!0}),i(".js-add-repo-access-form",(async function(e,s){z();const r=(await s.json()).json;let i;const c=t(e,".js-repo-access-group");i="collaborators"===c.id?c.querySelector(".js-repo-access-list-invites"):c.querySelector(".js-repo-access-list");const a=e.querySelector(".js-add-repo-access-field");if(a instanceof HTMLInputElement){const e=a.value;a.value="","teams"===c.id&&function(e){const n=document.querySelector(".js-repo-access-team-select");if(n){let s=0;for(const t of o(n,".js-repo-access-team-select-option"))e===t.getAttribute("data-team-id")&&(t.hidden=!0),t.hidden||s++;0===s&&t(n,".js-repo-access-group").classList.add("no-form")}}(e)}if(r.error)R(r.error,c);else{if(function(){const e=document.getElementById("collaborators");e&&(n(e,".js-add-new-collab",HTMLButtonElement).disabled=!0)}(),function(){const e=document.querySelector("#teams .js-add-new-collab");e instanceof HTMLButtonElement&&(e.disabled=!0)}(),i){i.insertAdjacentHTML("beforeend",r.html);const e=o(i,".js-repo-access-entry");n(e[e.length-1],"a").focus()}if(W(c),r.seats||0===r.seats){const e=1===r.seats?"seat":"seats",t=document.getElementById("available-seats");t&&(t.innerHTML=`${r.seats} ${e}`)}}})),i(".js-remove-repo-access-form",(async function(e,n){if(e.hasAttribute("data-skip-remote"))return;try{await n.text()}catch(r){return void R(e.getAttribute("data-error-message")||"",t(e,".js-repo-access-group"))}z();const s=t(e,".js-repo-access-entry"),o=t(e,".js-repo-access-group");"teams"===o.id&&function(e){const n=document.querySelector(".js-repo-access-team-select");if(n){const s=n.querySelector(`[data-team-id='${e}']`);s instanceof HTMLElement&&(s.hidden=!1),t(n,".js-repo-access-group").classList.remove("no-form")}}(s.getAttribute("data-team-id")||""),s.remove(),W(o)})),e("combobox-commit",".js-repo-add-access-search",(function(e){if(!(e.target instanceof Element))return;const s=t(e.target,".js-repo-add-access-search"),r=t(e.target,".js-autocomplete-item");n(s,".js-selected-member-id").textContent=e.target.getAttribute("data-autocomplete-label")||"selection";const i=n(s,".js-selected-member-badge"),c=n(r,".js-selection-badge");i.innerHTML=c.innerHTML,N(o(s,".js-repo-add-access-search-selected, .js-repo-add-access-search-selection"));const a=s.querySelector(".js-base-role-badge");J(a,!0);const l=r.getAttribute("data-type"),u=r.hasAttribute("data-admin"),d=o(s,u?"[data-disable-org-admin]":"[data-disable-org-role]",HTMLInputElement),m=o(s,'input[name="role"]',HTMLInputElement);if(m.length>0){if(U(m),"org-member"===l){J(a,!1);for(const e of d){e.disabled=!0,t(e,".js-role-checkbox").classList.add("text-gray-light")}}if(u)n(s,".js-role-admin",HTMLInputElement).checked=!0;else if(a&&"org-member"===l){n(t(a,".js-role-checkbox"),'input[name="role"]',HTMLInputElement).checked=!0}else"outside-collab"!==l&&"team"!==l&&"org-member"!==l&&"email"!==l||(n(s,".js-role-pull",HTMLInputElement).checked=!0)}})),e("click",".js-cancel-selection",(function(e){if(!(e.target instanceof Element))return;const s=t(e.target,".js-repo-add-access-search");n(s,".js-repo-add-access-search-input",HTMLInputElement).value="",U(o(s,'input[name="role"]',HTMLInputElement)),N(o(s,".js-repo-add-access-search-selected, .js-repo-add-access-search-selection")),J(s.querySelector(".js-base-role-badge"),!0)})),e("details-dialog-close",".js-add-access-form",(function({currentTarget:e}){const t=n(e,".js-repo-add-access-search-input",HTMLInputElement);t.value="",U(o(t,'input[name="role"]',HTMLInputElement));const s=n(e,".js-repo-add-access-search-selection"),r=n(e,".js-repo-add-access-search-selected");r.hidden||(N([r,s]),J(t.querySelector(".js-base-role-badge"),!0))})),e("change",".js-repo-features-form input[type=checkbox]",(function({currentTarget:e}){const s=t(e,".js-repo-option"),o=n(s,".js-status-indicator");o.classList.remove("status-indicator-success","status-indicator-failed"),o.classList.add("status-indicator-loading")})),i(".js-repo-features-form",(async function(e,s){let r;try{r=await s.html()}catch(i){for(const s of o(e,".status-indicator-loading")){s.classList.remove("status-indicator-loading"),s.classList.add("status-indicator-failed");const e=t(s,".js-repo-option"),o=n(e,"input[type=checkbox]",HTMLInputElement);o.checked=!o.checked}return}for(const t of o(e,".status-indicator-loading"))t.classList.remove("status-indicator-loading"),t.classList.add("status-indicator-success");n(document,".js-repo-nav").replaceWith(r.html)})),e("change",".js-merge-features-form input[type=checkbox]",(function({currentTarget:e}){const s=e.form;for(const t of s.querySelectorAll(".errored"))t.classList.remove("errored");const o=t(e,".js-repo-option"),r=n(o,".js-status-indicator");r.classList.remove("status-indicator-success","status-indicator-failed"),r.classList.add("status-indicator-loading")})),i(".js-merge-features-form",(async function(e,s){try{await s.text()}catch(o){const s=o.response&&o.response.text.endsWith("(protected_branch_policy)")?".js-no-merge-commit-warning":".js-select-one-warning";for(const t of e.querySelectorAll(s))t instanceof HTMLElement&&(t.hidden=!1);for(const r of e.querySelectorAll(".status-indicator-loading")){r.classList.remove("status-indicator-loading"),r.classList.add("status-indicator-failed");const e=t(r,".js-repo-option");e.classList.add("errored");const s=n(e,"input[type=checkbox]",HTMLInputElement);s.checked=!s.checked}for(const t of e.querySelectorAll(".status-indicator-success"))t.classList.remove("status-indicator-success");return}for(const t of e.querySelectorAll(".errored"))t.classList.remove("errored");for(const t of e.querySelectorAll(".js-select-one-warning, .js-no-merge-commit-warning"))t instanceof HTMLElement&&(t.hidden=!0);for(const t of e.querySelectorAll(".status-indicator-loading"))t.classList.remove("status-indicator-loading"),t.classList.add("status-indicator-success")})),e("change","input.js-required-status-toggle",(function({currentTarget:e}){const s=t(e,".js-protected-branch-settings");n(s,".js-required-statuses").classList.toggle("d-none",!e.checked)})),e("change","input.js-required-status-checkbox",(function({currentTarget:e}){const s=t(e,".js-protected-branches-item");n(s,".js-required-status-badge").classList.toggle("d-none",!e.checked)})),e("change",".js-authorized-branch-pushers-toggle, input.js-authorized-review-dismisser-toggle",(function({currentTarget:e}){const s=t(e,".js-protected-branch-options"),o=n(s,".js-authorized-pushers");o.classList.toggle("d-none",!e.checked),n(o,".js-add-protected-branch-user-or-team input",HTMLInputElement).focus()})),e("click",".js-protected-branch-merge-queue-toggle",(function(e){const t=e.currentTarget,n=t.getAttribute("data-confirm-if-checked")||"";t.checked||confirm(n)||e.preventDefault()})),e("change",".js-protected-branch-include-admin-toggle",(function({currentTarget:e}){const n=t(e,".js-protected-branch-settings").querySelectorAll(".js-protected-branch-admin-permission");for(const t of n)t.classList.toggle("d-none"),t.classList.toggle("active",!t.classList.contains("d-none"))})),e("auto-complete-change",".js-add-protected-branch-user-or-team",(async function({target:e}){const o=e,r=o.value;if(!r)return;o.value="";const i=t(o,".js-protected-branch-options"),c=n(i,".js-authorized-users-and-teams"),a=c.querySelector(`div[data-user-or-team-name='${r}']`);if(a)return void n(a,".js-protected-branch-pusher").classList.add("user-already-added");const l=s(o,"data-add-url"),u=new URL(l,window.location.origin),d=new URLSearchParams(u.search.slice(1));d.append("item",r),u.search=d.toString(),c.append(await L(document,u.toString())),V(i)})),e("click",".js-remove-authorized-user-or-team",(function({currentTarget:e}){const n=t(e,".js-protected-branch-options");t(e,".js-authorized-user-or-team").remove(),V(n)})),r("#pages-cname-field",{constructor:HTMLInputElement,add(e){T(e,(function(){n(document,".js-pages-cname-save-btn",HTMLButtonElement).disabled=e.value===e.defaultValue}))}}),r(".js-pages-https-status-form",{constructor:HTMLFormElement,add(e){const t=new Request(e.action,{method:e.method,body:new FormData(e)});(async()=>{try{const n=await L(document,t);e.replaceWith(n)}catch(n){if(!n.response||404!==n.response.status)throw n}})()}});function X(){return n(document,".js-update-page-source-btn",HTMLButtonElement)}function Y(e){const t=document.querySelector(`input[name=${e}]:checked`);return t?t.value:null}setTimeout((async function e(){const t=document.querySelector(".js-pages-certificate-status");if(t){const n=s(t,"data-status-url"),o=await L(document,n);t.replaceWith(o),setTimeout(e,15e3)}}),15e3);const G=Y("source"),K=Y("source_dir");e("change",".js-select-branch",e=>{const t=e.target;if("source"!==t.name)return;const s=n(document,".js-select-source-dir",HTMLElement),o=n(document,".js-branch-icon",HTMLElement);""!==t.value?(o.hidden=!1,s.hidden=!1):(o.hidden=!0,s.hidden=!0);const r=function(){const e=document.querySelector(".js-disable-page-warning");return e||null}();null!=r&&(""===t.value?r.hidden=!1:r.hidden=!0),t.value!==G?(X().disabled=!1,""===t.value&&null!=r&&(X().disabled=!0)):K!==Y("source_dir")&&""!==G||(X().disabled=!0)}),e("change",".js-select-source-dir",e=>{const t=e.target;"source_dir"===t.name&&(t.value!==K?X().disabled=!1:Y("source")===G&&(X().disabled=!0))}),e("submit",".js-repo-restore",(async function(e){const s=e.currentTarget;let o;e.preventDefault();const r=t(s,".js-deleted-repository");try{o=await fetch(s.action,{method:s.method,body:new FormData(s),headers:{Accept:"text/html","X-Requested-With":"XMLHttpRequest"}})}catch(i){}o&&o.ok&&function(e,t){const s=n(e,".js-restore-status");s.innerHTML="",s.append(t)}(r,w(document,await o.text()))})),r(".js-restore-repo-job",(function(e){!function(e){n(e,"form>button",HTMLButtonElement).disabled=!0,n(e,"summary").classList.add("disabled");for(const t of e.querySelectorAll("details"))t.removeAttribute("open")}(t(e,".js-deleted-repository"))})),e("click",".js-disableable-summary.disabled",e=>e.preventDefault());const Q=new WeakMap,Z=new WeakMap;async function ee(e){const o=t(e,".js-repository-selection-component"),r=Q.get(o)||0;r>100||(e.textContent=s(e,"data-disable-with"),e.disabled=!0,Q.set(o,r+1),async function(e,t){const s=await L(document,t);n(e,".js-more-repository-items-replace-target").replaceWith(s),function(e){a(n(e,".js-repository-items-filter-input"),"change")}(e)}(o,s(e,"data-url")),await Promise.resolve(),o.dispatchEvent(new CustomEvent("repository-items-loaded")))}function te(e,t){const s=n(e,".js-btn-select-repositories",HTMLButtonElement);s.disabled=!t,s.setAttribute("aria-disabled",String(!t))}function ne(e){const t=e.currentTarget,s=t.closest(".js-repository-items-dialog");if(!s)return;const r=o(t,".js-repository-item-checkbox",HTMLInputElement).filter(e=>e.checked).length,i=n(s,".js-selected-repositories-count-container");n(i,".js-selected-repositories-count").textContent=r.toString(),n(i,".js-multiple-repositories-text").hidden=1===r,n(i,".js-single-repository-text").hidden=1!==r}e("click",".js-more-repository-items-button",(function(e){ee(e.currentTarget)})),r(".js-more-repository-items-button",{constructor:HTMLButtonElement,add:ee}),e("change",".js-repository-selection-component",ne),e("reset",".js-repository-selection-component",ne),e("change",".js-repository-selection-component",(function(e){const n=e.target;if("checkbox"!==(null==n?void 0:n.type))return;const s=t(n,".js-repository-selection-component"),o=Z.get(s)||new Set;o.has(n.value)?o.delete(n.value):o.add(n.value),Z.set(s,o),te(t(n,".js-repository-items-dialog"),o.size>0)})),e("click",".js-btn-select-repositories",(function(e){const s=t(e.target,".js-repository-items-dialog"),o=n(s,".js-repository-selection-component");Z.set(o,new Set),t(o,"details-dialog",l).toggle(!1),$(),O(e)})),e("details-dialog-close",".js-repository-items-dialog",(function(e){const t=e.currentTarget.closest(".js-repository-items-dialog");if(!t)return;const s=n(t,".js-repository-selection-component");if(!s.hasAttribute("data-discard-changes-on-close"))return;const o=Z.get(s);if(o){for(const e of o.keys()){const t=n(s,`[value='${e}']`,HTMLInputElement);t.checked=!t.checked}Z.set(s,new Set),te(t,!1)}}));function se({currentTarget:e}){if(e instanceof Element){const t=e.querySelector(".js-runner-bulk-form");v(t)}}e("click",".js-repo-toggle-team",(async function(){const e=(e=>{const t=new URLSearchParams(window.location.search),n=new Set(t.getAll("team_ids[]")),s=o(document,e,HTMLInputElement);for(const o of s)o.checked?n.add(o.value):n.delete(o.value);return[...n]})(".js-repo-toggle-team");for(const t of o(document,".js-repo-team-suggestions-pagination > a",HTMLAnchorElement)){const n=s(t,"href");if(n){const s=new URL(n,window.location.origin),o=new URLSearchParams(s.search.slice(1));o.delete("team_ids[]");for(const t of e)o.append("team_ids[]",t);s.search=o.toString(),t.setAttribute("href",s.toString())}}n(document,'[name="team_ids"]',HTMLInputElement).value=e.join(",")})),y(".js-synced-repo-owner-input",(function(e){const t=e.target,n=t.getAttribute("data-sync");if(!n)return;const s=document.querySelectorAll(`[data-sync-with="${n}"]`);for(const o of s)o.textContent=t.value})),e("change",".js-runner-bulk-actions-toggle",(function(){const e=!!document.querySelector(".js-runner-bulk-actions-toggle:checked");document.querySelector(".js-runner-default-header").hidden=e,document.querySelector(".js-runner-bulk-actions-header").hidden=!e})),e("details-menu-selected",".js-runner-bulk-menu",(function(e){const n=e.detail.relatedTarget,s=t(n,".js-runner-bulk-menu"),o=function(e){const t="true"===e.getAttribute("aria-checked"),n=document.createElement("input");return n.type="hidden",n.name=t?"add[]":"remove[]",n.value=e.getAttribute("data-value"),n}(n),r=s.querySelector(".js-runner-bulk-form"),i=r.querySelector(`[value='${o.value}']`);i?i.replaceWith(o):r.append(o),s.addEventListener("toggle",se,{once:!0})}),{capture:!0});let oe=!1;function re(e,t){let n=e.nextElementSibling;for(;n&&ce(n);)n.hidden=t,n=n.nextElementSibling}function ie(e,t){n(e,".js-runner-chevron-up").hidden=t,n(e,".js-runner-chevron-down").hidden=!t}e("click",".js-open-runner-group",(function(e){if(oe)return;oe=!0;const n=e.currentTarget,s=t(n,".js-runner-group");"false"===n.getAttribute("aria-expanded")?(n.setAttribute("aria-expanded","true"),re(s,!1),ie(s,!1)):(n.setAttribute("aria-expanded","false"),re(s,!0),ie(s,!0)),oe=!1}));function ce(e){return null!=e&&e.classList.contains("js-runner")}function ae({currentTarget:e}){if(e instanceof Element){const t=n(e,".js-runner-labels-form",HTMLFormElement);v(t)}}function le(){return n(document,".js-add-u2f-registration-form",HTMLFormElement)}e("details-menu-selected",".js-runner-group-visibility-menu",(function(e){const o=e.detail.relatedTarget,r=t(o,".js-runner-group-form"),i=s(o,"value");n(r,".js-runner-group-targets-selection").hidden="SELECTED"!==i}),{capture:!0}),e("click",".js-runner-group-checkbox",(function(e){const s=e.currentTarget;if(!(s instanceof HTMLInputElement))return;const o=t(s,".js-runner-group"),r=o.querySelector(".js-open-runner-group");if(!r)return;if(oe)return;oe=!0,s.checked&&(r.setAttribute("aria-expanded","true"),re(o,!1),ie(o,!1));let i=o.nextElementSibling;for(;i&&ce(i);){const e=n(i,".js-bulk-actions-toggle",HTMLInputElement);ce(i.nextElementSibling)?e.checked=s.checked:(e.checked=!s.checked,e.click()),i=i.nextElementSibling}oe=!1})),i(".js-create-runner-label-form",(async function(e,s){var o;let r;const i=t(e,".js-runner-labels-menu"),c=n(i,".js-runner-label-error");try{r=await s.html()}catch(u){return void((null===(o=u.response.json)||void 0===o?void 0:o.message)&&c&&(c.textContent=u.response.json.message,c.hidden=!1))}if(!r||!r.html)return;c&&(c.hidden=!0,c.textContent="");const a=r.html.querySelector(".js-label-input");n(i,".js-filterable-runner-labels").prepend(r.html),null==a||a.click();const l=n(i,".js-label-filter-field",HTMLInputElement);l.value="",l.focus()})),e("details-menu-selected",".js-runner-labels-details",(function(e){e.currentTarget.addEventListener("toggle",ae,{once:!0})}),{capture:!0}),i(".js-saved-reply-delete",(async function(e,t){await t.text();const n=e.closest(".js-saved-reply-container"),s=n.querySelectorAll(".js-saved-reply-list-item").length;n.classList.toggle("has-replies",s>1),e.closest(".js-saved-reply-list-item").remove()}));function ue(e){e.webauthn_register_request&&le().setAttribute("data-webauthn-register-request",JSON.stringify(e.webauthn_register_request))}function de(e,t){const s=n(document,".js-new-u2f-registration");s.classList.add("is-showing-error"),s.classList.remove("is-sending");for(const n of s.querySelectorAll(".js-u2f-message"))n.hidden=!0;const o=n(s,e);t&&(o.textContent=t),o.hidden=!1}async function me(e){if(!(await M("high")))throw new Error("sudo failed");const t=n(document,".js-add-u2f-registration-form",HTMLFormElement);u(t,"response").value=JSON.stringify(e);try{const e=await k(t.action,{method:t.method,body:new FormData(t),headers:{accept:"application/json"}}),s=await e.json();ue(s),n(document,".js-new-u2f-registration").classList.remove("is-sending","is-active"),n(document,".js-u2f-registration-nickname-field",HTMLInputElement).value="";const o=s.registration;o&&n(document,".js-u2f-registrations").append(w(document,o))}catch(s){if(s.response){const e=await s.response.json();ue(e),de(".js-u2f-server-error",e.error)}else de(".js-u2f-network-error")}}async function pe(){try{!function(){const e=n(document,".js-new-u2f-registration");e.classList.add("is-sending"),e.classList.remove("is-showing-error")}();const e=JSON.parse(s(le(),"data-webauthn-register-request")),t=await S(e);await me(t)}catch(e){throw de(".js-webauthn-registration-error"),e}}function fe(){pe()}i(".js-u2f-registration-delete",(async function(e,n){const s=t(e,".js-u2f-registration");s.classList.add("is-sending"),ue((await n.json()).json),s.remove()})),e("click",".js-add-u2f-registration-link",(function(){const e=n(document,".js-new-u2f-registration");e.classList.add("is-active"),e.classList.remove("is-showing-error"),n(document,".js-u2f-registration-nickname-field",HTMLInputElement).focus()})),e("click",".js-u2f-register-retry",(function(){fe()})),e("submit",".js-add-u2f-registration-form",(function(e){e.preventDefault(),fe()})),r(".js-u2f-box",(function(e){e.classList.toggle("available",E())}));let he=class SelectedItemListElement extends HTMLElement{connectedCallback(){this.includeFragment.addEventListener("include-fragment-replaced",()=>{this.updateCount()})}get count(){return this.items.filter(e=>e.checked).length}updateCount(){const e=this.count;this.selectedCount.textContent=String(e),this.description.hidden=e<=0,this.pluralItemsDescription.hidden=1===e,this.singularItemDescription.hidden=1!==e}hideDescription(){this.description.hidden=!0}showDescription(){const e=this.count;this.description.hidden=e<=0}};function ge(e,t){n(e,".js-add-new-user",HTMLButtonElement).disabled=!t}d([m],he.prototype,"selectedCount",void 0),d([m],he.prototype,"pluralItemsDescription",void 0),d([m],he.prototype,"singularItemDescription",void 0),d([m],he.prototype,"description",void 0),d([p],he.prototype,"items",void 0),d([m],he.prototype,"includeFragment",void 0),he=d([f],he),r(".js-add-user-form",(function(e){ge(e,!1)})),e("auto-complete-change",".js-add-user-completer",(function({target:e}){const n=e;ge(t(n,".js-add-user-form"),!!n.value);const s=document.querySelector(".js-designated-user");s&&(n.value?s.textContent=`@${n.value}`:s.textContent=s.getAttribute("data-autocomplete-text"))})),i(".js-remote-submit",(async function(e,t){const s=await t.html(),o=n(document,".js-user-block-settings-list"),r=n(o,".js-blocked-list"),i=n(o,".js-user-block-blank-slate");ge(e,!1);const c=n(e,".js-add-blocked-user-field",HTMLInputElement);b(c,""),i.hidden=!0,r.hidden=!1,r.prepend(s.html)})),i(".js-user-sessions-revoke",(async function(e,n){await n.text();const s=t(e,".js-user-sessions-container");if(t(e,".js-user-session").remove(),s){const e=s.querySelectorAll(".js-user-session").length;s.classList.toggle("has-active-sessions",e>0)}})),i(".js-verify-ssh-key",(async function(e,s){await s.html();const o=t(e,"li");n(o,".js-unverified-user-key-notice").remove(),n(o,".js-user-key-icon").classList.remove("unverified-user-key"),e.remove()})),i(".js-leave-collaborated-repo",(async function(e,t){await t.html();const o=s(e,"data-repo-id"),r=s(e,"data-owner-id");n(document,`.js-collab-repo[data-repo-id='${o}']`).remove(),document.querySelector(".js-collab-repo")||(n(document,".js-collaborated-repos-empty").hidden=!1,n(document,".js-collaborated-repos").hidden=!0);const i=document.querySelector(`.js-collab-repo-owner[data-owner-id='${r}']`);i&&(i.querySelector(".js-collab-repo")||i.remove())}));let je=class ThemePickerElement extends HTMLElement{constructor(){super(...arguments),this.scrolledPage=0}connectedCallback(){this.theme(this.themeLinks.find(e=>e.classList.contains("selected"))||this.themeLinks[0]),this.updateScrollLinks()}hideSpinner(){this.spinner.hidden=!0}onThemeLinkClick(e){this.theme(e.currentTarget),e.preventDefault()}toggleFullPicker(e){const t=e.currentTarget;this.fullPicker.hidden=!this.fullPicker.hidden,this.miniPicker.hidden=!this.fullPicker.hidden,this.scrollToTheme(this.theme(),!1),t.classList.toggle("open")}onEditClick(e){this.editForm&&v(this.editForm),e.preventDefault()}onPublishClick(e){var t;this.publishThemeSlugInput&&(this.publishThemeSlugInput.value=(null===(t=this.theme())||void 0===t?void 0:t.getAttribute("data-theme-slug"))||""),this.publishForm&&v(this.publishForm),e.preventDefault()}prevPage(){this.scrollToTheme(this.themeLinks[0]),this.updateScrollLinks()}nextPage(){this.scrollToTheme(this.themeLinks[6]),this.updateScrollLinks()}updateScrollLinks(){const e=0===this.scrolledPage;this.scrollBackwardsLink.disabled=e,this.scrollBackwardsLink.classList.toggle("disabled",e),this.scrollForwardsLink.disabled=!e,this.scrollForwardsLink.classList.toggle("disabled",!e)}selectedThemeIndex(){return this.themeLinks.indexOf(this.selectedTheme)}prevTheme(e){let t=(this.selectedThemeIndex()-1)%this.themeLinks.length;t<0&&(t+=this.themeLinks.length),this.theme(this.themeLinks[t]),e.preventDefault()}nextTheme(e){this.theme(this.themeLinks[(this.selectedThemeIndex()+1)%this.themeLinks.length]),e.preventDefault()}scrollToTheme(e,t=!0){this.scrolledPage=Math.floor(this.themeLinks.indexOf(e)/6);let n=0;if(this.scrolledPage>0){const e=this.themeLinks[6*this.scrolledPage];n=e.offsetLeft}const s=this.themeLinksContainer,o=n-s.scrollLeft;if(t&&0!==o){const e=150;r=t=>{if(t<0)return;const r=s.scrollLeft;return s.scrollLeft=Math[n-r>0?"min":"max"](r+o*(t/e),n),r!==s.scrollLeft&&void 0},new Promise(e=>{let t=performance.now();!function n(){window.requestAnimationFrame(s=>{!1!==r(s-t)?(t=s,n()):e()})}()})}else s.scrollLeft=n;var r}theme(e){if(!e)return this.selectedTheme;this.selectedTheme=e,this.showPreviewFor(e);for(const t of this.themeLinks)t.classList.remove("selected");e.classList.add("selected"),this.scrollToTheme(e),this.themeName.textContent=e.getAttribute("data-theme-name")}showPreviewFor(e){var t;this.spinner.hidden=!1,e.getAttribute("data-theme-gem")?this.pagePreview.setAttribute("src",e.href):(this.themeSlugInput&&(this.themeSlugInput.value=(null===(t=this.theme())||void 0===t?void 0:t.getAttribute("data-theme-slug"))||""),this.previewForm&&v(this.previewForm))}};d([m],je.prototype,"pagePreview",void 0),d([m],je.prototype,"spinner",void 0),d([m],je.prototype,"fullPicker",void 0),d([m],je.prototype,"miniPicker",void 0),d([m],je.prototype,"themeName",void 0),d([m],je.prototype,"scrollBackwardsLink",void 0),d([m],je.prototype,"scrollForwardsLink",void 0),d([m],je.prototype,"themeLinksContainer",void 0),d([p],je.prototype,"themeLinks",void 0),d([m],je.prototype,"themeSlugInput",void 0),d([m],je.prototype,"editForm",void 0),d([m],je.prototype,"publishForm",void 0),d([m],je.prototype,"publishThemeSlugInput",void 0),d([m],je.prototype,"previewForm",void 0),je=d([f],je)}}}));
//# sourceMappingURL=settings-bootstrap-26964b45.js.map
