System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var e,t,n,s,o,a,c,r;return{setters:[function(a){e=a.o,t=a.r,n=a.a,s=a.b,o=a.g},function(e){a=e.ad,c=e.an,r=e.d}],execute:function(){function l(){document.body.classList.add("is-sending"),document.body.classList.remove("is-sent","is-not-sent")}function d(){document.body.classList.add("is-sent"),document.body.classList.remove("is-sending")}function i(e){e&&(s(document,".js-sms-error").textContent=e),document.body.classList.add("is-not-sent"),document.body.classList.remove("is-sending")}e(".js-transform-notice",{constructor:HTMLElement,add(e){const t=a("org_transform_notice");for(const s of t){const t=document.createElement("span");try{t.textContent=atob(decodeURIComponent(s.value)),c(s.key),e.appendChild(t),e.hidden=!1}catch(n){}return}}}),t(".js-send-auth-code",async(e,t)=>{let n;l();try{n=await t.text()}catch(s){i(s.response.text)}n&&d()}),n("click",".js-send-two-factor-code",(async function(e){const t=e.currentTarget,n=t.form,a=`${s(n,".js-country-code-select",HTMLSelectElement).value} ${s(n,".js-sms-number",HTMLInputElement).value}`;l();const c=s(t.parentElement,".js-data-url-csrf",HTMLInputElement),u=new FormData;u.append("number",a);try{const e=o(t,"data-url");await r(e,{method:"POST",mode:"same-origin",body:u,headers:{"Scoped-CSRF-Token":c.value}}),d();for(const t of n.querySelectorAll(".js-2fa-enable"))(t instanceof HTMLInputElement||t instanceof HTMLButtonElement)&&(t.disabled=!1);s(n,".js-2fa-otp").focus()}catch(f){if(f.response){i(await f.response.text())}for(const e of n.querySelectorAll(".js-2fa-enable"))(e instanceof HTMLInputElement||e instanceof HTMLButtonElement)&&(e.disabled=!0)}})),n("click",".js-enable-enable-two-factor-auth-button",(function(){const e=s(document,".js-enable-two-factor-auth-button",HTMLButtonElement);e.disabled=!1,e.removeAttribute("aria-label"),e.classList.remove("tooltipped")})),e(".js-two-factor-sms-fallback-button",(function(e){e.addEventListener("toggle",(function(e){const t=e.currentTarget;for(const n of t.querySelectorAll(".flash"))n instanceof HTMLElement&&(n.hidden=!0);s(t,".js-configure-sms-fallback").hidden=!1,s(t,".js-verify-sms-fallback").hidden=!0}))})),t(".js-two-factor-set-sms-fallback",async(e,t)=>{let n;try{n=await t.text()}catch(o){const t=s(e,".js-configure-sms-fallback"),n=s(e,".js-verify-sms-fallback"),a=t.hidden?n:t,c=s(a,".flash");switch(o.response.status){case 422:case 429:c.textContent=o.response.text,c.hidden=!1}}if(n)switch(n.status){case 200:case 201:window.location.reload();break;case 202:s(e,".js-configure-sms-fallback").hidden=!0,s(e,".js-verify-sms-fallback").hidden=!1,s(e,".js-fallback-otp").focus()}})}}}));
//# sourceMappingURL=sessions-bootstrap-47f2c1fe.js.map
